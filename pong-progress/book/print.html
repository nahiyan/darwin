<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CSE498R Extended Work</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="week1.html"><strong aria-hidden="true">1.</strong> Week 1</a></li><li class="chapter-item expanded "><a href="week2.html"><strong aria-hidden="true">2.</strong> Week 2</a></li><li class="chapter-item expanded "><a href="week3.html"><strong aria-hidden="true">3.</strong> Week 3</a></li><li class="chapter-item expanded "><a href="week4.html"><strong aria-hidden="true">4.</strong> Week 4</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">CSE498R Extended Work</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="week-1-progress"><a class="header" href="#week-1-progress">Week 1 Progress</a></h1>
<h2 id="goal"><a class="header" href="#goal">Goal</a></h2>
<p>Design the basic functionalities of the extension, including physics, controls, and communication through a predefined port.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>In this week, the new extension of Darwin, Pong, has its foundation set. The extension is developed using <a href="https://en.wikipedia.org/wiki/Godot_(game_engine)">Godot</a>, a powerful <a href="https://en.wikipedia.org/wiki/Game_integrated_development_environment">game development environment</a>, which is much more powerful and way easier to develop the environment of the simulation compared to cocos2d-x. However, this required programming most of the components of this extension in a language called <a href="https://en.wikipedia.org/wiki/Godot_(game_engine)#GDScript">GDScript</a>, in contrast to C++ that was used for developing the cocos2d-x-based extensions.</p>
<p>The physics, which involves setting the shapes of the objects involved for collision detection, motion, controls, etc, has been set. Moreover, the executable of the extension, which has the task of communicating with the control panel of Darwin, needs to have the communication system built too. Thus, a <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> reading library has been integrated to take data, such as the configuration entities, in a single compact string (based on the protocol of Darwin).</p>
<p>The image below shows all the physics objects in one frame:</p>
<p><img src="images/overview.png" alt="alt text" title="Overview" /></p>
<h2 id="structure"><a class="header" href="#structure">Structure</a></h2>
<p>The extension is comprises the following classes of objects:</p>
<ul>
<li>Paddle</li>
<li>Ball</li>
<li>Boundary</li>
</ul>
<h3 id="paddle"><a class="header" href="#paddle">Paddle</a></h3>
<p>The paddle acts as a table-tennis bat, since the game, pong, itself is inspired by it. It's simply a wide and thin rectangular box in the simulation that is powered through a <a href="https://docs.godotengine.org/en/stable/classes/class_kinematicbody2d.html#class-kinematicbody2d">KinematicBody2D</a> in Godot. KinematicBody2D makes it possible for the paddle to move, collide with the ball and also be obstructed by the boundaries.</p>
<p>The mechanism for controlling the paddle, which includes its horizontal motion, has been programmed in GDScript.</p>
<h3 id="ball"><a class="header" href="#ball">Ball</a></h3>
<p>The ball poses the main challenge for the players (controllers of the paddles). The only objective of the game is to hit the ball and not miss it. If the ball hits the bottom boundary, the player is out. It's represented by a <a href="https://docs.godotengine.org/en/stable/classes/class_rigidbody2d.html">RigidBody2D</a> in Godot. RigidBody2D allows the physics engine to calculate the position and velocity of the ball at any given time based on the applied force/impulse, torque, etc. It allows the ball to bounce off the boundary/paddle[s]. Continuous collision detection based on the ball's casted shape is used to avoid the ball tunneling through the boundary due to sudden great change in speed.</p>
<h3 id="boundary"><a class="header" href="#boundary">Boundary</a></h3>
<p>The boundary is what keeps the ball and paddles from escaping the game scene. It's represented by a <a href="https://docs.godotengine.org/en/stable/classes/class_staticbody2d.html">StaticBody2D</a> in Godot, since it doesn't move but will have a role in collision detection. The boundary will cover all 4 sides of the viewport.</p>
<h2 id="communication"><a class="header" href="#communication">Communication</a></h2>
<p>The extension will communicate with Darwin's components, such as the control panel, through JSON. The control panel will relay configuration details through JSON of the following entities:</p>
<blockquote>
<p>The machine name, used as keys in the JSON data, is in parenthesis.</p>
</blockquote>
<ul>
<li>Models File Path (<code>models_file_path</code>) </li>
<li>Initial Population Source (<code>start_from_saved_models</code>)</li>
<li>Speed (<code>speed</code>)</li>
<li>Population Size (<code>population_size</code>)</li>
<li>Genome Similarity:
<ul>
<li>Weights Difference Coefficient (<code>gs_c_weights_difference</code>)</li>
<li>Disjoints Difference Coefficient (<code>gs_c_disjoints_difference</code>)</li>
<li>Overall Coefficient (<code>gs_c_overall</code>)</li>
</ul>
</li>
<li>Species Staleness Threshold (<code>species_staleness_threshold</code>)</li>
<li>Probabilities:
<ul>
<li>Crossover (<code>crossover</code>)</li>
<li>Connection Mutation (<code>connection_mutation</code>)</li>
<li>Perturb (<code>perturb</code>)</li>
<li>Link Mutation (<code>link_mutation</code>)</li>
<li>Node Mutation (<code>node_mutation</code>)</li>
<li>Bias Mutation (<code>bias_mutation</code>)</li>
<li>Disable Mutation (<code>disable_mutation</code>)</li>
<li>Enable Mutation (<code>enable_mutation</code>)</li>
</ul>
</li>
</ul>
<h1 id="week-2-progress"><a class="header" href="#week-2-progress">Week 2 Progress</a></h1>
<h2 id="goal-1"><a class="header" href="#goal-1">Goal</a></h2>
<p>Build a new module of Darwin, featuring the C++ implementation of the NEAT algorithm. This
will involve the development of an API that will act as a front-end of the module intended for
connecting with the extension.</p>
<h2 id="c-implementation-of-the-neat-algorithm"><a class="header" href="#c-implementation-of-the-neat-algorithm">C++ Implementation of the NEAT Algorithm</a></h2>
<p>Since the extension, Pong, is developed using Godot, GDScript is used for doing all the scripting. GDScript, however, doesn't have a large community and isn't very popular. Moreover, it's designed for game scripting, not anything else.</p>
<p>For general-purpose and high-performance programming, and also considering the fact that the NEAT algorithm's most popular implementation is based on C/C++, it's logical to do all the neuroevolution programming in C/C++.</p>
<p>The official C++ implementation of the NEAT algorithm, however, isn't well documented and not very easy to use. This called for a hunt for much better libraries featuring the NEAT algorithm. Here are the CPP-based NEAT libraries that I found along the way:</p>
<ul>
<li><a href="http://www.multineat.com/">MultiNEAT</a></li>
<li><a href="https://github.com/hav4ik/tinyai">hav4ik/tinyai</a></li>
<li><a href="https://github.com/F3R70/NEAT">F3R70/NEAT</a></li>
</ul>
<p><strong>MultiNEAT</strong> appeared to be a well-structured and feature-rich NEAT library but it resulted in a lot of unexpected runtime errors, which were getting a bit too tedious to debug and fix. In short, the attempt to use MultiNEAT was a failure.</p>
<p><strong>FER70/NEAT</strong> is just a slightly improved version of the official C++ implementation of the NEAT algorithm with nothing extra added on top, which I considered as a backup library if <strong>hav4ik/tinyai</strong> wouldn't work.</p>
<p><strong>hav4ik/tinyai</strong> is a compact NEAT implementation in C++ that is straightforward and simply works out of the box. It has just all the features that was needed for powering the neuroevolution of the pong simulation.</p>
<p>On a side note, a Rust implementation of the NEAT algorithm,  <a href="https://github.com/TLmaK0/rustneat">TLmaK0/rustneat</a>, also looked promising. However, Godot's FFI only supports C and C++, not Rust, which would mean that a C/C++ library would have to be created to talk with the Rust library on Godot's behalf, further complicating the process.</p>
<p>Thus, <strong>hav4ik/tinyai</strong> has been chosen for integrating the NEAT algorithm into the extension.</p>
<h2 id="development-of-the-api"><a class="header" href="#development-of-the-api">Development of the API</a></h2>
<p>The API serves as the frontend of the NEAT module of Darwin, providing an interface for the extension to use the NEAT algorithm through GDScript.</p>
<p>The API is simple and hides the complexity of the module, exposing only the following methods:</p>
<ul>
<li>prepare</li>
<li>evaluate</li>
<li>setFitness</li>
<li>nextGeneration</li>
</ul>
<p>Internally, it holds the following properties:</p>
<ul>
<li>pool</li>
<li>genomes</li>
<li>neuralNetworks</li>
</ul>
<h3 id="properties"><a class="header" href="#properties">Properties</a></h3>
<h4 id="pool"><a class="header" href="#pool">pool</a></h4>
<p><code>pool</code> represents the pool of genomes in the population, along with innovation tracking. It acts as the center of the whole system: handling settings, evolution, etc.</p>
<h4 id="genomes"><a class="header" href="#genomes">genomes</a></h4>
<p><code>genomes</code> holds the genomes of all species in the current generation. The list is cleared and populated at the start of every generation.</p>
<h4 id="neuralnetworks"><a class="header" href="#neuralnetworks">neuralNetworks</a></h4>
<p><code>neuralNetworks</code> is a list of the neural networks associated with each genome; or rather, the phenotype of each genotype. Since the neural networks, which are needed several times in a generation, have to be generated from a genome every single time, it's efficient to store them in a place instead of spawning them unnecessarily.</p>
<h3 id="methods"><a class="header" href="#methods">Methods</a></h3>
<h4 id="prepare"><a class="header" href="#prepare">prepare</a></h4>
<p>This method takes the parameters and initiates the <code>pool</code> along with the rest of the properties for the initial generation. It's called once at the beginning of the session.</p>
<h4 id="evaluate"><a class="header" href="#evaluate">evaluate</a></h4>
<p>Called by each genome to get the output value from the input values by evaluating the associated neural network.</p>
<h4 id="setfitness"><a class="header" href="#setfitness">setFitness</a></h4>
<p>Registers the fitness value of a specific genome.</p>
<h4 id="nextgeneration"><a class="header" href="#nextgeneration">nextGeneration</a></h4>
<p>Proceeds to the next generation by triggering the pool and updating the list of genotypes and phenotypes (neural networks).</p>
<h1 id="week-3-progress"><a class="header" href="#week-3-progress">Week 3 Progress</a></h1>
<h2 id="goal-2"><a class="header" href="#goal-2">Goal</a></h2>
<p>Integrate the NEAT algorithm module, along with all other required modules of Darwin, into the extension. The extension needs to handle the evaluation of the genomes, calculating fitness values at the end of every generation, and connecting each player instance with its respective phenotype.</p>
<h2 id="connecting-the-library-with-godot"><a class="header" href="#connecting-the-library-with-godot">Connecting the Library with Godot</a></h2>
<p>The extension, Pong, uses the game framework, Godot, as its base. As a result, for connecting the NEAT algorithm's module, which is a library, to Godot, GDNative has to be used. GDNative is a mechanism for connecting the library with the game framework, Godot.</p>
<p>To do so, the library, written in C++ and comprises the API built in the previous week, has to be linked with godot-cpp, a C++ library containing everything required to let Godot load and use it.</p>
<p>Once connected, the library and its functions can be accessed through GDScript, as with any other GDScript-based function.</p>
<h2 id="controlling-the-paddles"><a class="header" href="#controlling-the-paddles">Controlling the Paddles</a></h2>
<pre><code class="language-python">func _process(delta: float) -&gt; void:
    var extents: Vector2 = ($CollisionShape2D.shape as RectangleShape2D).extents

    var ball_radius: float = (ball.get_node(&quot;CollisionShape2D&quot;).shape as CircleShape2D).radius
    var horizontal_distance: float = position.x - ball.position.x
    var vertical_distance: float = abs(position.y - extents.y - ball.position.y - ball_radius)

    var evaluation = neat.evaluate(id, ball.harmful, horizontal_distance, vertical_distance)
    var _collision: KinematicCollision2D = move_and_collide(
        evaluation * Vector2(1000, 0) * delta
    )
</code></pre>
<p>Each paddle is controlled every frame/step of the game framework by the respective neural network. The vertical and horizontal distance, along with the type of the ball, is fed into the neural network through its input layer.</p>
<p>The output is simply a value ranging from -1 to 1 (inclusive) that is used to determine the horizontal velocity of the paddle.</p>
<p><code>neat::evaluate</code> belongs to the NEAT algorithm module, which plays the role of evaluating the input parameters using the neural network.</p>
<p>This is how it's handled by the C++ library:</p>
<pre><code class="language-cpp">double evaluate(int id, bool harmfulBall, float horizontalDistance, float verticalDistance)
{
    try {
        vector&lt;double&gt; inputs, outputs(1, 0.0);
        inputs.push_back(harmfulBall);
        inputs.push_back(horizontalDistance);
        inputs.push_back(verticalDistance);
        neuralNetworks[id].evaluate(inputs, outputs);

        return outputs[0];
    } catch (...) {
        Godot::print(&quot;Error occurred while trying to evaluate.&quot;);

        return 0;
    }
}
</code></pre>
<h2 id="calculating-the-fitness-of-each-genome"><a class="header" href="#calculating-the-fitness-of-each-genome">Calculating the Fitness of Each Genome</a></h2>
<p>Whenever the ball hits a paddle or the bottom boundary, the fitness values are updated for the genomes of each paddle.</p>
<ul>
<li>
<p>Each genome is rewarded for its horizontal distance to the ball, depending on whether the ball is harmful or harmless.</p>
</li>
<li>
<p>A harmless ball when hit successfully by a paddle is rewarded, whereas hitting a harmful ball penalizes the paddle that hit it.</p>
</li>
</ul>
<p>This is how the fitness values are handled for the current population to evolve to the next:</p>
<pre><code class="language-python">func next_generation() -&gt; void:
    ball.cycles_count = 0
    reset_ball()

    for group in population:
        var score: float = 0
        for member in group.members:
            score += member.fitness

        max_fitness = max(score, max_fitness)

    generation_id += 1
    hud.set_generation(generation_id)
    hud.set_max_fitness(max_fitness)

    # Finalize the fitness, reset fitness and position
    for group in population:
        var score: float = 0
        for member in group.members:
            score += member.fitness
            member.fitness = 0

        if group.members.size() &gt; 0:
            neat.set_fitness(group.members[0].id, score)

    neat.next_generation()

    # Add dead paddles to the scene
    revive_dead_paddles()
</code></pre>
<h2 id="connecting-the-phenotypes-with-the-paddles"><a class="header" href="#connecting-the-phenotypes-with-the-paddles">Connecting the Phenotypes With the Paddles</a></h2>
<p>Each paddle instance is going to have an ID representing it, allocated during the beginning of the evolution session. This is going to be used by the library for identifying the genome to retrieve its phenotype, evaluate it, and register its fitness value.</p>
<p>The genomes and their associated neural networks (phenotypes) are stored in the library in ordered lists:</p>
<pre><code class="language-cpp">shared_ptr&lt;neat::pool&gt; pool;
vector&lt;neat::genome*&gt; genomes;
vector&lt;ann::neuralnet&gt; neuralNetworks; 
</code></pre>
<p>This is how the list is populated:</p>
<pre><code class="language-cpp">void update()
{
    genomes.clear();
    neuralNetworks.clear();

    auto genomeSpeciePairs = pool-&gt;get_genomes();
    for (auto pair : genomeSpeciePairs) {
        genomes.push_back(pair.second);

        ann::neuralnet neuralNetwork;
        neuralNetwork.from_genome(*pair.second);
        neuralNetworks.push_back(neuralNetwork);
    }
}
</code></pre>
<h1 id="week-4-progress"><a class="header" href="#week-4-progress">Week 4 Progress</a></h1>
<h2 id="goal-3"><a class="header" href="#goal-3">Goal</a></h2>
<p>Develop and test a neural network storage format that will involve integration with the persistent models system of Darwin. Eventually, results for the new extension will be generated, outlining its performance. Patterns in the training process will also be observed and noted.</p>
<h2 id="neural-network-storage-format"><a class="header" href="#neural-network-storage-format">Neural Network Storage Format</a></h2>
<p><code>tinyai</code> has its own storage format for the neural networks, which looks something like this:</p>
<pre><code>non-recurrent\n6\n\n1 0\n\n\n1 0\n\n\n1 0\n\n\n2 4\n1 0.0594683 0 -0.462274 4 0.394442 5 0.563337 \n\n0 2\n0 1.06421 1 -0.233392 \n\n0 1\n4 1.07719 \n\n
</code></pre>
<p>The following parameters of the genes are stored:</p>
<ul>
<li>The ANN type (currently only non-recurrent NNs are supported)</li>
<li>Nodes
<ul>
<li>Node type</li>
<li>Number of inward connections</li>
<li>Inward connections
<ul>
<li>Inward connection ID and weight</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>The neural networks are stored instead of genes because of the fact that the eventual goal of the system is to train and produce fit neural networks, which are the end products. Genes are part of the system only for neuroevolution.</p>
</blockquote>
<h2 id="integration-with-the-persistent-models-system"><a class="header" href="#integration-with-the-persistent-models-system">Integration With the Persistent Models System</a></h2>
<p>The persistent models system of Darwin stores the best-fit models (neural networks in this case) in the format generated by <code>tinyai</code>. It's integrated with Pong through a GDNative library, which in turn is used in GDScript to connect with the entirety of the game framework.</p>
<h3 id="functions-of-the-gdnative-library"><a class="header" href="#functions-of-the-gdnative-library">Functions of the GDNative Library</a></h3>
<ul>
<li><code>initiate</code> for loading the models file.</li>
<li><code>model</code> for fetching individual model.</li>
<li><code>count</code> for counting the number of models.</li>
<li><code>stage</code> for staging a specified model.</li>
<li><code>commit</code> for committing a selected number of models.</li>
<li><code>save</code> for writing the changes to the models file.</li>
</ul>
<h3 id="loading-the-models"><a class="header" href="#loading-the-models">Loading the Models</a></h3>
<pre><code class="language-python"># Load models
PersistentModels.initiate(Global.configuration.models_file_path)
</code></pre>
<h3 id="updating-at-the-end-of-every-generation"><a class="header" href="#updating-at-the-end-of-every-generation">Updating at the End of Every Generation</a></h3>
<p>After the end of every generation, the models are staged, committed and saved.</p>
<p>This is how each model is staged:</p>
<pre><code class="language-python">PersistentModels.stage(Neat.model_to_string(model_id), score)
</code></pre>
<p>This is how a commit and save is done:</p>
<pre><code class="language-python">PersistentModels.commit(Global.configuration.saved_models_count)
PersistentModels.save()
</code></pre>
<h3 id="checking-if-there-are-no-saved-models"><a class="header" href="#checking-if-there-are-no-saved-models">Checking if There Are No Saved Models</a></h3>
<p>This is a snippet that checks if no saved model exists in the file.</p>
<pre><code class="language-python">var count = PersistentModels.count()

if count == 0:
    print(&quot;No saved model found.&quot;)
    return
</code></pre>
<h2 id="results"><a class="header" href="#results">Results</a></h2>
<p>The results below are fitness vs. generations graphs of 4 training sessions, with each training session being run until it reached a plateau. Population size is varied in each training session.</p>
<p>Parameters shared by all the training sessions:</p>
<table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody>
<tr><td>delta_disjoint</td><td>2.00</td></tr>
<tr><td>delta_weights</td><td>0.40</td></tr>
<tr><td>delta_threshold</td><td>1.30</td></tr>
<tr><td>stale_species</td><td>15</td></tr>
<tr><td>connection_mutate_chance</td><td>0.25</td></tr>
<tr><td>perturb_chance</td><td>0.90</td></tr>
<tr><td>crossover_chance</td><td>0.75</td></tr>
<tr><td>link_mutation_chance</td><td>2.00</td></tr>
<tr><td>node_mutation_chance</td><td>0.50</td></tr>
<tr><td>bias_mutation_chance</td><td>0.40</td></tr>
<tr><td>disable_mutation_chance</td><td>0.40</td></tr>
<tr><td>enable_mutation_chance</td><td>0.20</td></tr>
</tbody></table>
<h3 id="50-genes"><a class="header" href="#50-genes">50 Genes</a></h3>
<p><img src="images/week4/PongResults50.png" alt="" /></p>
<h3 id="100-genes"><a class="header" href="#100-genes">100 Genes</a></h3>
<p><img src="images/week4/PongResults100.png" alt="" /></p>
<h3 id="300-genes"><a class="header" href="#300-genes">300 Genes</a></h3>
<p><img src="images/week4/PongResults300.png" alt="" /></p>
<h3 id="600-genes"><a class="header" href="#600-genes">600 Genes</a></h3>
<p><img src="images/week4/PongResults600.png" alt="" /></p>
<h2 id="observations-and-notes"><a class="header" href="#observations-and-notes">Observations and Notes</a></h2>
<blockquote>
<p>TODO</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
